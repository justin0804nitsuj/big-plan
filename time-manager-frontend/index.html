<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Personal Time Manager</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-container">
    <header>
      <div class="header-main">
        <div>
          <h1>Personal Time Manager</h1>
          <p>任務管理 + 番茄鐘（支援 Guest 模式 + 帳號登入 + 雲端同步）</p>
        </div>

        <!-- 使用者狀態列 -->
        <div class="user-bar">
          <span id="authStatusLabel">Guest 模式</span>
          <button id="authActionBtn">登入 / 建立帳號</button>
        </div>
      </div>
    </header>

    <main>
      <!-- 左側：任務列表 -->
      <section class="panel panel-tasks-list">
        <h2>任務列表</h2>
        <div class="filters">
          <button data-filter="all" class="filter-btn active">全部</button>
          <button data-filter="todo" class="filter-btn">未完成</button>
          <button data-filter="done" class="filter-btn">已完成</button>
        </div>
        <ul id="taskList" class="task-list"></ul>
      </section>

      <!-- 中間：任務表單 -->
      <section class="panel panel-task-form">
        <h2>新增 / 編輯任務</h2>
        <form id="taskForm">
          <input type="hidden" id="taskId" />

          <label>
            標題 (Title)
            <input type="text" id="taskTitle" required />
          </label>

          <label>
            描述 (Description)
            <textarea id="taskDescription" rows="3"></textarea>
          </label>

          <label>
            截止日期 (Due Date)
            <input type="date" id="taskDueDate" />
          </label>

          <label>
            優先度 (Priority)
            <select id="taskPriority">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
            </select>
          </label>

          <!-- 任務分類 -->
          <label>
            分類 (Category)
            <select id="taskCategory">
              <option value="">無</option>
              <option value="school">School</option>
              <option value="research">Research</option>
              <option value="game">Game Dev</option>
              <option value="personal">Personal</option>
              <option value="study">Study</option>
            </select>
          </label>

          <div class="form-actions">
            <button type="submit" id="saveTaskBtn">儲存任務</button>
            <button type="button" id="clearFormBtn" class="secondary">清空表單</button>
          </div>
        </form>

        <div class="localstorage-actions">
          <h3>資料備份</h3>
          <button id="exportJsonBtn">匯出 JSON</button>
          <label class="import-label">
            匯入 JSON
            <input type="file" id="importJsonInput" accept=".json" hidden />
          </label>
        </div>
      </section>

      <!-- 右側：番茄鐘 -->
      <section class="panel panel-pomodoro">
        <h2>番茄鐘 (Pomodoro)</h2>

        <div class="current-task">
          <h3>目前專注任務：</h3>
          <p id="currentTaskLabel">尚未選擇任務</p>
        </div>

        <div class="timer-display">
          <span id="timerModeLabel">專注時間</span>
          <div id="timerValue">25:00</div>
        </div>

        <div class="timer-controls">
          <button id="startTimerBtn">Start</button>
          <button id="pauseTimerBtn" class="secondary">Pause</button>
          <button id="resetTimerBtn" class="secondary">Reset</button>
        </div>

        <div class="timer-settings">
          <h3>設定</h3>
          <label>
            專注分鐘數 (Focus)
            <input type="number" id="focusMinutesInput" min="1" value="25" />
          </label>
          <label>
            休息分鐘數 (Break)
            <input type="number" id="breakMinutesInput" min="1" value="5" />
          </label>
          <button id="saveSettingsBtn">儲存設定</button>
        </div>
      </section>

      <!-- 每日完成度統計 -->
      <section class="panel panel-stats">
        <h2>今日完成度統計</h2>
        <p id="todayStatsLabel">今日尚無任務記錄</p>
      </section>
    </main>
  </div>

  <!-- Auth Modal -->
  <div id="authModal" class="modal hidden">
    <div class="modal-content">
      <h2 id="authModalTitle">登入</h2>

      <label id="authNameGroup">
        名稱 (Name)
        <input type="text" id="authNameInput" />
      </label>

      <label>
        Email
        <input type="email" id="authEmailInput" />
      </label>

      <label>
        密碼 (Password)
        <input type="password" id="authPasswordInput" />
      </label>

      <div class="modal-actions">
        <button id="authSubmitBtn">登入</button>
        <button id="authCancelBtn" class="secondary" type="button">取消</button>
      </div>

      <p class="modal-toggle-text">
        <span id="authToggleLabel">還沒有帳號？</span>
        <button id="authToggleBtn" type="button" class="link-button">
          建立帳號
        </button>
      </p>
    </div>
  </div>

  <!-- 拖曳排序用 Sortable.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <!-- 主程式 -->
  <script src="main.js"></script>
</body>
</html>
